{% extends 'base.html' %}
{% load static %}

{% block title %}Inicio | Crecer México{% endblock %}

{% block content %}
{% load static %} {# Asegúrate de tener {% load static %} si usas static para alguna imagen/CSS/JS del carrusel #}
{% for section in sections %}
    {% if section.section == 'hero' and hero %}
    <link rel="stylesheet" href="{% static 'css/inicio.css' %}">
    <section id="hero" class="hero-section">
        <div class="container">
            <!-- CONTENIDO MÓVIL (se oculta en desktop) -->
            <div class="hero-content">
                <h1>{{ hero.title }}</h1>
                {% if hero.subtitle %}
                <p class="hero-subtitle">{{ hero.subtitle }}</p>
                {% endif %}
            </div>

            <!-- GRID MÓVIL (se oculta en desktop) -->
            {% if hero.card1_title or hero.card2_title or hero.card3_title %}
            <div class="grid">
                <!-- Tarjeta 1 -->
                {% if hero.card1_title %}
                <div class="card">
                    {% if hero.card1_icon %}
                    <div class="card-icon">
                        <i class="{{ hero.card1_icon }}"></i>
                    </div>
                    {% endif %}
                    <h3 class="card-title">{{ hero.card1_title }}</h3>
                    <p class="card-description">{{ hero.card1_description }}</p>
                </div>
                {% endif %}

                <!-- Tarjeta 2 -->
                {% if hero.card2_title %}
                <div class="card">
                    {% if hero.card2_icon %}
                    <div class="card-icon">
                        <i class="{{ hero.card2_icon }}"></i>
                    </div>
                    {% endif %}
                    <h3 class="card-title">{{ hero.card2_title }}</h3>
                    <p class="card-description">{{ hero.card2_description }}</p>
                </div>
                {% endif %}

                <!-- Tarjeta 3 -->
                {% if hero.card3_title %}
                <div class="card">
                    {% if hero.card3_icon %}
                    <div class="card-icon">
                        <i class="{{ hero.card3_icon }}"></i>
                    </div>
                    {% endif %}
                    <h3 class="card-title">{{ hero.card3_title }}</h3>
                    <p class="card-description">{{ hero.card3_description }}</p>
                </div>
                {% endif %}
            </div>
            {% endif %}

            <!-- BOTONES MÓVIL (ahora van después de las cards) -->
            <div class="hero-buttons">
                <a href="{{ hero.primary_button_url }}" class="btn btn-primary">
                    {{ hero.primary_button_text }}
                </a>
                <a href="{{ hero.secondary_button_url }}" class="btn btn-outline">
                    {{ hero.secondary_button_text }}
                </a>
            </div>

            <!-- LAYOUT DESKTOP/TABLET (se muestra solo en pantallas grandes) -->
            <div class="hero-main-content">
                <!-- BLOQUE CONTENIDO IZQUIERDO -->
                <div class="hero-content-left">
                    <h1>{{ hero.title }}</h1>
                    
                    {% if hero.subtitle %}
                    <p class="hero-subtitle-left">{{ hero.subtitle }}</p>
                    {% endif %}
                    
                    <div class="hero-buttons-left">
                        <a href="{{ hero.primary_button_url }}" class="btn btn-primary">
                            {{ hero.primary_button_text }}
                        </a>
                        <a href="{{ hero.secondary_button_url }}" class="btn btn-outline">
                            {{ hero.secondary_button_text }}
                        </a>
                    </div>
                </div>

                <!-- COLUMNA CARDS DERECHA -->
                {% if hero.card1_title or hero.card2_title or hero.card3_title %}
                <div class="hero-cards-column">
                    <!-- CARD 1: Altura compacta -->
                    {% if hero.card1_title %}
                    <div class="hero-card hero-card-1">
                        {% if hero.card1_icon %}
                        <div class="hero-card-icon">
                            <i class="{{ hero.card1_icon }}"></i>
                        </div>
                        {% endif %}
                        <div class="hero-card-content">
                            <h3 class="hero-card-title">{{ hero.card1_title }}</h3>
                            <p class="hero-card-description">{{ hero.card1_description }}</p>
                        </div>
                    </div>
                    {% endif %}

                    <!-- CARD 2: Altura mayor -->
                    {% if hero.card2_title %}
                    <div class="hero-card hero-card-2">
                        {% if hero.card2_icon %}
                        <div class="hero-card-icon">
                            <i class="{{ hero.card2_icon }}"></i>
                        </div>
                        {% endif %}
                        <div class="hero-card-content">
                            <h3 class="hero-card-title">{{ hero.card2_title }}</h3>
                            <p class="hero-card-description">{{ hero.card2_description }}</p>
                        </div>
                    </div>
                    {% endif %}

                    <!-- CARD 3: Altura compacta -->
                    {% if hero.card3_title %}
                    <div class="hero-card hero-card-3">
                        {% if hero.card3_icon %}
                        <div class="hero-card-icon">
                            <i class="{{ hero.card3_icon }}"></i>
                        </div>
                        {% endif %}
                        <div class="hero-card-content">
                            <h3 class="hero-card-title">{{ hero.card3_title }}</h3>
                            <p class="hero-card-description">{{ hero.card3_description }}</p>
                        </div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>

            <!-- CARRUSEL (se mantiene para todas las pantallas) -->
            {% with active_images=hero.carousel_images.all|dictsort:"order" %}
                {% if active_images %}
                <div class="carousel">
                    <div class="carousel-track">
                        <!-- Primer set de imágenes -->
                        {% for image_item in active_images %}
                            {% if image_item.is_active %}
                            <div class="carousel-item">
                                <img src="{{ image_item.image.url }}" alt="Imagen del carrusel {{ forloop.counter }}">
                            </div>
                            {% endif %}
                        {% endfor %}
                        
                        <!-- Segundo set IDÉNTICO para continuidad perfecta -->
                        {% for image_item in active_images %}
                            {% if image_item.is_active %}
                            <div class="carousel-item">
                                <img src="{{ image_item.image.url }}" alt="Imagen del carrusel {{ forloop.counter }}">
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            {% endwith %}
        </div>
    </section>
    {% endif %}


    {% if section.section == 'programs' and programs %}
    <!-- Sección de Programas -->
    <section id="programas" class="programs-section">
        <div class="container">
            <div class="section-header">
                <h2>{{ programs_section.title|default:"Nuestros Programas" }}</h2>
                {% if programs_section.subtitle %}
                <p class="section-subtitle">{{ programs_section.subtitle }}</p>
                {% endif %}
            </div>
            
            <div class="programs-grid">
                {% for program in programs %}
                <div class="program-card {% if forloop.first %}active{% endif %}">
                    <div class="program-image">
                        <img src="{{ program.image.url }}" alt="{{ program.title }}">
                    </div>
                    <div class="program-content">
                        <div class="program-text">
                            <h3>{{ program.title }}</h3>
                            {% if program.description %}
                            <p>{{ program.description }}</p>
                            {% endif %}
                        </div>
                        <a href="{{ program.url }}" class="program-link">Conocer más</a>
                    </div>
                </div>
                {% endfor %}
                
                <!-- Controles de navegación -->
                <button class="carousel-nav prev" aria-label="Anterior">
                    <svg viewBox="0 0 24 24">
                        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                    </svg>
                </button>
                <button class="carousel-nav next" aria-label="Siguiente">
                    <svg viewBox="0 0 24 24">
                        <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/>
                    </svg>
                </button>
                
                <!-- Indicadores -->
                <div class="carousel-indicators">
                    {% for program in programs %}
                    <button class="carousel-indicator {% if forloop.first %}active{% endif %}" data-slide="{{ forloop.counter0 }}"></button>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    {% if section.section == 'testimonial' and testimonial %}
    <!-- Sección de Cita Textual -->
    <section id="testimonio" class="testimonial-section">
        <div class="container">
            <div class="testimonial-content">
                <div>
                    <img src="{{testimonial.image1.url}}" alt="{{testimonial.name}}">
                </div>
                <blockquote>
                    {{ testimonial.quote }}
                </blockquote>
                <div class="testimonial-author">
                    {% if testimonial.image %}
                    <div class="author-image">
                        <img src="{{ testimonial.image.url }}" alt="{{ testimonial.name }}">
                    </div>
                    {% endif %}
                    <div class="author-info">
                        <h4>{{ testimonial.name }}</h4>
                        <p>{{ testimonial.position }}</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    {% if section.section == 'video' and featured_video %}
    <!-- Sección de Video Destacado -->
    <section id="video-destacado" class="featured-video-section">
        <div class="container">
            <div class="section-header">
                <h2>{{ video_section.title|default:"Video Destacado" }}</h2>
                {% if video_section.subtitle %}
                <p class="section-subtitle">{{ video_section.subtitle }}</p>
                {% endif %}
            </div>
            
            <div class="video-container">
                <div class="video-wrapper">
                    <iframe 
                        src="{{ featured_video.youtube_url }}" 
                        title="{{ featured_video.title }}" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                    </iframe>
                </div>
                <div class="video-info">
                    <h3>{{ featured_video.title }}</h3>
                    {% if featured_video.description %}
                    <p>{{ featured_video.description }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
    {% endif %}
{% endfor %}
<script src="{% static 'js/inicio.js' %}"></script>

{% endblock %}